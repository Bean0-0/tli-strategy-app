{% extends "base.html" %}

{% block title %}Dashboard - TLi Trading Tool{% endblock %}

{% block content %}
<div class="dashboard">
    <h1>Trading Dashboard</h1>
    
    <!-- Strategy Reminders -->
    <div class="strategy-reminders">
        <div class="reminder large-cap">
            <h3>ðŸš€ Large Cap Strategy (AMD, NVDA, etc.)</h3>
            <p><strong>LET THEM RUN!</strong> Be patient with large caps. They have room to grow.</p>
            <p>Current Large Cap Positions: {{ large_caps|length }}</p>
        </div>
        <div class="reminder small-cap">
            <h3>âš¡ Small Cap Strategy (OSCR, HIMS, etc.)</h3>
            <p><strong>TRADE AGGRESSIVELY!</strong> Take profits, manage risk actively.</p>
            <p>Current Small Cap Positions: {{ small_caps|length }}</p>
        </div>
    </div>
    
    <!-- Recent TLi Comments -->
    <div class="section">
        <h2>Recent TLi Notes</h2>
        {% if comments %}
        <div class="comments-list">
            {% for comment in comments %}
            <div class="comment-card">
                <div class="comment-header">
                    {% if comment.symbol %}
                    <span class="symbol">${{ comment.symbol }}</span>
                    {% endif %}
                    <span class="type">{{ comment.comment_type.replace('_', ' ').title() }}</span>
                    <span class="date">{{ comment.created_at.strftime('%Y-%m-%d %H:%M') }}</span>
                </div>
                <div class="comment-content">{{ comment.content }}</div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p>No comments yet. <a href="{{ url_for('comments') }}">Add your first note</a></p>
        {% endif %}
    </div>
    
    <!-- Active Positions -->
    <div class="section">
        <h2>Open Positions</h2>
        <a href="{{ url_for('add_position') }}" class="btn btn-primary">Add Position</a>
        
        {% if positions %}
        <div class="positions-grid">
            {% for position in positions %}
            {% if position.status == 'open' %}
            <div class="position-card {% if position.is_large_cap %}large-cap{% else %}small-cap{% endif %}">
                <div class="position-header">
                    <h3>${{ position.symbol }}</h3>
                    <span class="badge">{{ position.position_type }}</span>
                    {% if position.is_large_cap %}
                    <span class="badge badge-large">Large Cap</span>
                    {% else %}
                    <span class="badge badge-small">Small Cap</span>
                    {% endif %}
                </div>
                <div class="position-details">
                    <p><strong>Entry:</strong> ${{ "%.2f"|format(position.entry_price) }}</p>
                    <p><strong>Shares:</strong> {{ position.shares }}</p>
                    <p><strong>Cost Basis:</strong> ${{ "%.2f"|format(position.cost_basis) }}</p>
                    {% if position.notes %}
                    <p class="notes">{{ position.notes }}</p>
                    {% endif %}
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
        {% else %}
        <p>No open positions.</p>
        {% endif %}
    </div>
    
    <!-- Active Alerts -->
    <div class="section">
        <h2>Active Alerts</h2>
        {% if alerts %}
        <div class="alerts-list">
            {% for alert in alerts %}
            <div class="alert-item">
                <span class="symbol">${{ alert.symbol }}</span>
                <span class="price">${{ "%.2f"|format(alert.price) }}</span>
                <span class="type">{{ alert.alert_type.replace('_', ' ').title() }}</span>
                {% if alert.notes %}
                <span class="notes">{{ alert.notes }}</span>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p>No active alerts. <a href="{{ url_for('alerts') }}">Set up alerts</a></p>
        {% endif %}
    </div>
</div>
{% endblock %}
